"use strict";!function(){function e(){$.getJSON("data.json").done(function(e){s(e)})}function s(e){$.each(e,function(e,s){var n=$("<section />").addClass("series card"),i={"episode-count":0,"watched-episodes-count":0};$("<h1 />").addClass("series-title").text(s["series-title"]).appendTo(n);var c=$("<div />").addClass("series-stats").appendTo(n),p=$("<div />").addClass("episode-grid");s.seasons&&o(s.seasons,p,i),p.appendTo(n);var u=(i["watched-episodes-count"]/i["episode-count"]*100).toFixed(0);c.text(i["episode-count"]+" episodes, "+i["watched-episodes-count"]+" watched ("+u+"%)"),a["series-count"]++,a["episode-count"]+=i["episode-count"],a["watched-episodes-count"]+=i["watched-episodes-count"];var r=(a["watched-episodes-count"]/a["episode-count"]*100).toFixed(0);d.text(a["episode-count"]+" episodes from "+a["series-count"]+" series, "+a["watched-episodes-count"]+" watched ("+r+"%)"),t.append(n).masonry("appended",n).masonry("layout")})}function o(e,s,o){$.each(e,function(e,t){var d=$("<div />").addClass("season");$("<span />").addClass("season-number").text(t["season-number"]).appendTo(d);for(var a=1;a<=t["episode-count"];a++){var n=$("<span />").addClass("episode").attr("title","Season "+t["season-number"]+", Episode "+a).appendTo(d);o["episode-count"]++,("completed"==t["watch-status"]||t["watched-episodes"]&&t["watched-episodes"].indexOf(a)>=0)&&(n.addClass("watched"),o["watched-episodes-count"]++)}d.appendTo(s)})}var t=void 0,d=void 0,a={"series-count":0,"episode-count":0,"watched-episodes-count":0};$(function(){d=$(".global-stats"),t=$(".series-list").masonry({itemSelector:".series",columnWidth:".series",gutter:16}),e()}),WebFont.load({google:{families:["Roboto:400,500:latin"]},active:function(){t.masonry("layout")}})}();